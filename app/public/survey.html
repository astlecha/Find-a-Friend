<!DOCTYPE html>
<html>
<head>
	<title>Survey</title>
	<!-- Bootstrap link -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

	<!--JS-->
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

	<!--Chosen items-->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
</head>
<body>

	<div class="container">
 		
 		<h2>Survey Questions</h2>
 		<hr>
 		<h3>About You</h3>

 		<h4>Name (required)</h4>
 		<input type="text" name id="name" class="form-control" required>
 		<h4>Link to Photo (required)</h4>
 		<input type="text" name id="photo" class="form-control" required>
 		<hr>
		
		<h3>Question 1</h3>
		<h4>Your mind is always buzzing with unexplored plans.</h4>
			<select data placeholder="" class="chosen-select" id="q1">
				<option value></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>

		<h3>Question 2</h3>
		<h4>Generally speaking, you rely more on your experience than your imagination.</h4>
			<select data placeholder="" class="chosen-select" id="q2">
				<option value></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>

		<h3>Question 3</h3>
		<h4>You find it easy to stay relaxed and focused even when there is some pressure.</h4>
			<select data placeholder="" class="chosen-select" id="q3">
				<option value></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>

		<h3>Question 4</h3>
		<h4>You rarely do something just out of sheer curiosity.</h4>
			<select data placeholder="" class="chosen-select" id="q4">
				<option value></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>

		<h3>Question 5</h3>
		<h4>People can rarely upset you.</h4>
			<select data placeholder="" class="chosen-select" id="q5">
				<option value></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>

		<h3>Question 6</h3>
		<h4>It is often difficult for you to relate to other people’s feelings.</h4>
			<select data placeholder="" class="chosen-select" id="q6">
				<option value></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>

		<h3>Question 7</h3>
		<h4>In a discussion, truth should be more important than people’s sensitivities.</h4>
			<select data placeholder="" class="chosen-select" id="q7">
				<option value></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>

		<h3>Question 8</h3>
		<h4>You rarely get carried away by fantasies and ideas.</h4>
			<select data placeholder="" class="chosen-select" id="q8">
				<option value></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>

		<h3>Question 9</h3>
		<h4>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</h4>
			<select data placeholder="" class="chosen-select" id="q9">
				<option value></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>

		<h3>Question 10</h3>
		<h4>You feel more energetic after spending time with a group of people.</h4>
			<select data placeholder="" class="chosen-select" id="q10">
				<option value></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>

		<br>
		<br>
		<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">Submit</button>

		<!-- Pop up with match result -->
		<div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
		  <div class="modal-dialog modal-sm" role="document">
		    <div class="modal-content" id="resultsModal">
		      <!-- Match result name goes here: -->
		      <p id="matchName"></p>
		      <!-- Match result photo goes here: -->
		      <img id="matchPhoto">
		    </div>
		  </div>
		</div>

		<hr>

		<!-- Footer with links to API and GitHub Repo -->
	 	<footer class="footer">
	      <div class="container">
	        <a href="/api/friends">View all Potential Friends</a> | <a href="https://github.com/astlecha/Find-a-Friend">GitHub Repo</a></p>
	      </div>
	    </footer>

    </div>

<script type="text/javascript">
	$('#submit').on('click', function(){

		function validate(){
			var formValid=true;
			//Check to see if first input box is empty
			$('form-control').each(function(){
				if($(this).val==='') 
					formValid=false;
			});

			//Check to see if any dropdowns are empty
			$('chosen-select').each(function(){
				if($(this).val==='') 
					formValid=false;
			})

			return formValid;
		}

		//Put user data into object
		if (validate()===true){

			var userProfile = {
				name: $('#name').val(),
				photo: $('#photo').val(),
				scores: [
			      $('#q1').val(),
			      $('#q2').val(),
			      $('#q3').val(),
			      $('#q4').val(),
			      $('#q5').val(),
			      $('#q6').val(),
			      $('#q7').val(),
			      $('#q8').val(),
			      $('#q9').val(),
			      $('#q10').val()
			    ]
			};

			//Grab the url to post data to API
			var currentUrl=window.location.origin
			//Post to API
			$.post(currentUrl+'api/friends', userProfile, function(bestMatch){
				console.log(bestMatch);
				alert('Matching you...')
				$('#matchName').text(bestMatch.name);
				$('#matchPhoto').attr('src', bestMatch.photo);

				//Show popup with match results
				$('#resultsModal').model('toggle');
			});

			//Clear form on submission
			$('#name').val(''),
			$('#photo').val(''),
			$('q1').val(''),
			$('q2').val(''),
			$('q3').val(''),
			$('q4').val(''),
			$('q5').val(''),
			$('q6').val(''),
			$('q7').val(''),
			$('q8').val(''),
			$('q9').val(''),
			$('q10').val('')
		}

		else{
			alert('You left one or more answers blank.');
		}

		return false;
	});

</script>


</body>
</html>